!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i=n(1)(),o="https://rawgit.com/DestinyDevs/BungieNetPlatform/master/three-tgx-loader/three.tgxloader.js";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var r={};window.DESTINYMODELCONFIG&&(r=window.DESTINYMODELCONFIG),r.apiKey||(r.apiKey=""),AFRAME.registerComponent("destiny-model",{schema:{itemHash:{type:"number"},game:{type:"string",default:"destiny2"},apiKey:{type:"string",default:r.apiKey},platform:{type:"string",default:"mobile"},d1Manifest:{type:"string",default:r.d1Manifest},d2Manifest:{type:"string",default:r.d2Manifest}},multiple:!1,init:function(){this.model=null,this.loader=null,this.loaderPromise=a().then(function(){this.loader=new THREE.TGXLoader}.bind(this))},update:function(){var t=this,e=this.el,n=this.data.itemHash,i=this.data.apiKey,o=this.data.d1Manifest,r=this.data.d2Manifest,a=this.data.game,s=this.data.platform;!(n&&i&&a)||"destiny2"===a&&"web"===s||"destiny2"===a&&!r||"mobile"===s&&!o||(this.remove(),this.loaderPromise.then(function(){THREE.TGXLoader.APIKey=i,THREE.TGXLoader.ManifestPath=o,THREE.TGXLoader.ManifestPath2=r,THREE.TGXLoader.Platform=s,this.loader.load({itemHashes:[n],game:a},function(n,i){var o=new THREE.Mesh(n,new THREE.MultiMaterial(i));o.rotation.x=-90*Math.PI/180;var r=(new THREE.Box3).setFromObject(o);o.position.x=-r.min.x,o.position.y=-r.min.y,o.position.z=-r.min.z,t.model=o,e.setObject3D("mesh",t.model),e.emit("model-loaded",{format:"destiny",model:t.model})})}.bind(this)))},remove:function(){this.model&&this.el.removeObject3D("mesh")},pause:function(){},play:function(){}});var a=function(){var t;return function(){return t=t||i(o)}}()},function(t,e){function n(){return"script_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function i(t,e){var n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.id=e,n.src=t,n}function o(t){const e=document.getElementById(t),n=e.parentNode;try{n&&n.removeChild(e)}catch(t){}}function r(t){const e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}function a(t,e,a){return new a(function(a,s){const d=e.timeout||5e3,u=n(),m=i(t,u),l=setTimeout(function(){s(new Error("Script request to "+t+" timed out")),o(u)},d),c=function(t){clearTimeout(t)};m.addEventListener("load",function(t){a({ok:!0}),c(l),o(u)}),m.addEventListener("error",function(e){s(new Error("Script request to "+t+" failed "+e)),c(l),o(u)}),r(m)})}function s(t){return t=t||{},function(e,n){return n=n||{},a(e,n,t.Promise||Promise)}}t.exports=s}]);